package leetcode.middleProblem;

//ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ï¼Œå…¶ä¸­ç¬¬ i ä¸ªå…ƒç´ ä»£è¡¨äº†ç¬¬ i å¤©çš„è‚¡ç¥¨ä»·æ ¼ ã€‚ 
//
// è®¾è®¡ä¸€ä¸ªç®—æ³•è®¡ç®—å‡ºæœ€å¤§åˆ©æ¶¦ã€‚åœ¨æ»¡è¶³ä»¥ä¸‹çº¦æŸæ¡ä»¶ä¸‹ï¼Œä½ å¯ä»¥å°½å¯èƒ½åœ°å®Œæˆæ›´å¤šçš„äº¤æ˜“ï¼ˆå¤šæ¬¡ä¹°å–ä¸€æ”¯è‚¡ç¥¨ï¼‰: 
//
// 
// ä½ ä¸èƒ½åŒæ—¶å‚ä¸å¤šç¬”äº¤æ˜“ï¼ˆä½ å¿…é¡»åœ¨å†æ¬¡è´­ä¹°å‰å‡ºå”®æ‰ä¹‹å‰çš„è‚¡ç¥¨ï¼‰ã€‚ 
// å–å‡ºè‚¡ç¥¨åï¼Œä½ æ— æ³•åœ¨ç¬¬äºŒå¤©ä¹°å…¥è‚¡ç¥¨ (å³å†·å†»æœŸä¸º 1 å¤©)ã€‚ 
// 
//
// ç¤ºä¾‹: 
//
// è¾“å…¥: [1,2,3,0,2]
//è¾“å‡º: 3 
//è§£é‡Š: å¯¹åº”çš„äº¤æ˜“çŠ¶æ€ä¸º: [ä¹°å…¥, å–å‡º, å†·å†»æœŸ, ä¹°å…¥, å–å‡º] 
// Related Topics æ•°ç»„ åŠ¨æ€è§„åˆ’ 
// ğŸ‘ 944 ğŸ‘ 0


import java.util.Arrays;

public class _309BestTimeToBuyAndSellStockWithCooldown {
    public static void main(String[] args) {
        Solution solution = new _309BestTimeToBuyAndSellStockWithCooldown().new Solution();
    }

    /**
     *
     */
    //leetcode submit region begin(Prohibit modification and deletion)
    class Solution {
        public int maxProfit(int[] prices) {
            if (prices == null || prices.length <= 1) {
                return 0;
            }
            int n = prices.length;
            // dp[i][j] ä»£è¡¨ç¬¬ i å¤©åœ¨ j çŠ¶æ€ä¸‹çš„æœ€å¤§åˆ©æ¶¦
            // j ä»£è¡¨ä»Šå¤©æŒæœ‰è‚¡ç¥¨çš„çŠ¶æ€ï¼Œ0 ä¸ºæœªæŒæœ‰ï¼Œ1 ä¸ºæŒæœ‰, 2ä¸ºå–å‡º
            int[][] dp = new int[n][3];
            dp[0][0] = 0;
            dp[0][1] = -prices[0];
            dp[0][2] = 0;
            for (int i = 1; i < n; i++) {
                // ä¸€ã€ç¬¬iå¤©ä¸æŒè‚¡ä¸”æ²¡å–å‡ºçš„çŠ¶æ€dp[i][0]ï¼Œä¹Ÿå°±æ˜¯æˆ‘æ²¡æœ‰è‚¡ç¥¨ï¼Œè€Œä¸”è¿˜ä¸æ˜¯å› ä¸ºæˆ‘å–äº†å®ƒæ‰æ²¡æœ‰çš„ï¼Œé‚£æ¢å¥è¯è¯´æ˜¯ä»i-1å¤©åˆ°ç¬¬iå¤©è½¬ç§»æ—¶ï¼Œå®ƒå‹æ ¹å°±æ²¡ç»™æˆ‘è‚¡ç¥¨ï¼æ‰€ä»¥i-1å¤©ä¸€å®šä¹Ÿæ˜¯ä¸æŒæœ‰ï¼Œé‚£å°±æ˜¯ä¸æŒæœ‰çš„ä¸¤ç§å¯èƒ½ï¼ši-1å¤©ä¸æŒè‚¡ä¸”å½“å¤©æ²¡æœ‰å–å‡ºdp[i-1][0]ï¼›i-1å¤©ä¸æŒè‚¡ä½†æ˜¯å½“å¤©å–å‡ºå»äº†dp[i-1][2]ï¼›
                //æ‰€ä»¥ï¼š dp[i][0]=max(dp[i-1][0],dp[i-1][2])
                //
                //äºŒã€ç¬¬iå¤©æŒè‚¡dp[i][1]ï¼Œä»Šå¤©æˆ‘æŒè‚¡ï¼Œæ¥è‡ªä¸¤ç§å¯èƒ½ï¼š
                //1ã€è¦ä¹ˆæ˜¯æ˜¨å¤©æˆ‘å°±æŒè‚¡ï¼Œä»Šå¤©ç»§æ‰¿æ˜¨å¤©çš„ï¼Œä¹Ÿå°±æ˜¯dp[i-1][1]ï¼Œè¿™ç§å¯èƒ½å¾ˆå¥½ç†è§£ï¼›
                //2ã€è¦ä¹ˆï¼šæ˜¯æ˜¨å¤©æˆ‘ä¸æŒè‚¡ï¼Œä»Šå¤©æˆ‘ä¹°å…¥çš„ï¼Œä½†å‰ææ˜¯æ˜¨å¤©æˆ‘ä¸€å®šæ²¡å–ï¼å› ä¸ºå¦‚æœæ˜¨å¤©æˆ‘å–äº†ï¼Œé‚£ä¹ˆä»Šå¤©æˆ‘ä¸èƒ½äº¤æ˜“ï¼ä¹Ÿå°±æ˜¯é¢˜ç›®ä¸­æ‰€è°“â€œå†·å†»æœŸâ€çš„å«ä¹‰ï¼Œåªæœ‰æ˜¨å¤©æ˜¯â€œä¸æŒè‚¡ä¸”å½“å¤©æ²¡å–å‡ºâ€è¿™ä¸ªçŠ¶æ€ï¼Œæˆ‘ä»Šå¤©æ‰èƒ½ä¹°å…¥ï¼æ‰€ä»¥æ˜¯dp[i-1][0]-p[i]
                //æ‰€ä»¥ï¼š dp[i][1]=max(dp[i-1][1],dp[i-1][0]-p[i])
                //
                //ä¸‰ã€iå¤©ä¸æŒè‚¡ä¸”å½“å¤©å–å‡ºäº†ï¼Œè¿™ç§å°±ç®€å•äº†ï¼Œé‚£å°±æ˜¯è¯´æ˜¨å¤©æˆ‘ä¸€å®šæ˜¯æŒè‚¡çš„ï¼Œè¦ä¸ç„¶æˆ‘ä»Šå¤©æ‹¿ä»€ä¹ˆå–å•Šï¼Œè€ŒæŒè‚¡åªæœ‰ä¸€ç§çŠ¶æ€ï¼Œæ˜¨å¤©æŒè‚¡çš„æ”¶ç›ŠåŠ ä¸Šä»Šå¤©å–å‡ºå¾—åˆ°çš„æ–°æ”¶ç›Šï¼Œå°±æ˜¯dp[i-1][1]+p[i]å•¦
                //æ‰€ä»¥ï¼šdp[i][2]=dp[i-1][1]+p[i]
                //
                //æ€»ç»“ï¼šæœ€åä¸€å¤©çš„æœ€å¤§æ”¶ç›Šæœ‰ä¸¤ç§å¯èƒ½ï¼Œè€Œä¸”ä¸€å®šæ˜¯â€œä¸æŒæœ‰â€çŠ¶æ€ä¸‹çš„ä¸¤ç§å¯èƒ½ï¼ŒæŠŠè¿™ä¸¤ç§â€œä¸æŒæœ‰â€æ¯”è¾ƒä¸€ä¸‹å¤§å°ï¼Œè¿”å›å³å¯
                dp[i][0] = Math.max(dp[i - 1][0], dp[i - 1][2]);
                dp[i][1] = Math.max(dp[i - 1][1], dp[i - 1][0] - prices[i]);
                dp[i][2] = dp[i - 1][1] + prices[i];
            }
            return Math.max(dp[n - 1][0], dp[n - 1][2]);
        }

        public int maxProfit_4status(int[] prices) {
            if (prices == null || prices.length <= 1) {
                return 0;
            }
            //æ—¶é—´å¤æ‚åº¦ï¼šO(n)
            //ç©ºé—´å¤æ‚åº¦ï¼šO(n)

            //è¾¾åˆ°ä¹°å…¥è‚¡ç¥¨çŠ¶æ€ï¼ˆçŠ¶æ€ä¸€ï¼‰å³ï¼šdp[i][0]ï¼Œæœ‰ä¸¤ä¸ªå…·ä½“æ“ä½œï¼š
            //
            //æ“ä½œä¸€ï¼šå‰ä¸€å¤©å°±æ˜¯æŒæœ‰è‚¡ç¥¨çŠ¶æ€ï¼ˆçŠ¶æ€ä¸€ï¼‰ï¼Œdp[i][0] = dp[i - 1][0]
            //æ“ä½œäºŒï¼šä»Šå¤©ä¹°å…¥äº†ï¼Œæœ‰ä¸¤ç§æƒ…å†µ
            //å‰ä¸€å¤©æ˜¯å†·å†»æœŸï¼ˆçŠ¶æ€å››ï¼‰ï¼Œdp[i - 1][3] - prices[i]
            //å‰ä¸€å¤©æ˜¯ä¿æŒå–å‡ºè‚¡ç¥¨çŠ¶æ€ï¼ˆçŠ¶æ€äºŒï¼‰ï¼Œdp[i - 1][1] - prices[i]
            //æ‰€ä»¥æ“ä½œäºŒå–æœ€å¤§å€¼ï¼Œå³ï¼šmax(dp[i - 1][3], dp[i - 1][1]) - prices[i]
            //
            //é‚£ä¹ˆdp[i][0] = max(dp[i - 1][0], max(dp[i - 1][3], dp[i - 1][1]) - prices[i]);
            //


            //è¾¾åˆ°ä¿æŒå–å‡ºè‚¡ç¥¨çŠ¶æ€ï¼ˆçŠ¶æ€äºŒï¼‰å³ï¼šdp[i][1]ï¼Œæœ‰ä¸¤ä¸ªå…·ä½“æ“ä½œï¼š
            //
            //æ“ä½œä¸€ï¼šå‰ä¸€å¤©å°±æ˜¯çŠ¶æ€äºŒ
            //æ“ä½œäºŒï¼šå‰ä¸€å¤©æ˜¯å†·å†»æœŸï¼ˆçŠ¶æ€å››ï¼‰
            //dp[i][1] = max(dp[i - 1][1], dp[i - 1][3]);
            //


            //è¾¾åˆ°ä»Šå¤©å°±å–å‡ºè‚¡ç¥¨çŠ¶æ€ï¼ˆçŠ¶æ€ä¸‰ï¼‰ï¼Œå³ï¼šdp[i][2] ï¼Œåªæœ‰ä¸€ä¸ªæ“ä½œï¼š
            //
            //æ“ä½œä¸€ï¼šæ˜¨å¤©ä¸€å®šæ˜¯ä¹°å…¥è‚¡ç¥¨çŠ¶æ€ï¼ˆçŠ¶æ€ä¸€ï¼‰ï¼Œä»Šå¤©å–å‡º
            //å³ï¼šdp[i][2] = dp[i - 1][0] + prices[i];
            //


            //è¾¾åˆ°å†·å†»æœŸçŠ¶æ€ï¼ˆçŠ¶æ€å››ï¼‰ï¼Œå³ï¼šdp[i][3]ï¼Œåªæœ‰ä¸€ä¸ªæ“ä½œï¼š
            //
            //æ“ä½œä¸€ï¼šæ˜¨å¤©å–å‡ºäº†è‚¡ç¥¨ï¼ˆçŠ¶æ€ä¸‰ï¼‰
            //p[i][3] = dp[i - 1][2];
            int n = prices.length;
            int[][] dp = new int[n][4];
            dp[0][0] = -prices[0];
            dp[0][1] = 0;
            dp[0][2] = 0;
            dp[0][3] = 0;
            for (int i = 1; i < n; i++) {
                dp[i][0] = Math.max(dp[i - 1][0], Math.max(dp[i - 1][3] - prices[i], dp[i - 1][1] - prices[i]));
                dp[i][1] = Math.max(dp[i - 1][1], dp[i - 1][3]);
                dp[i][2] = dp[i - 1][0] + prices[i];
                dp[i][3] = dp[i - 1][2];
            }
            return Arrays.stream(dp[n - 1]).max().getAsInt();
        }
    }
//leetcode submit region end(Prohibit modification and deletion)

}